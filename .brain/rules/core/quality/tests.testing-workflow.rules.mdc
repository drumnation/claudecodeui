---
description: 
globs: 
alwaysApply: true
---
# Testing Workflow Rules - MANDATORY FOR ALL TESTING TASKS

<!-- ==================== METADATA ==================== -->
alwaysApply: true
description: >
  Mandatory 4-step workflow for all testing tasks. Short, simple, and designed 
  for high agent compliance. No exceptions.
whenToUse:
  - Creating any test
  - Running tests
  - Debugging failed tests  
  - Analyzing test quality
# =====================================================

## ğŸš¨ EVERY TESTING TASK: Follow This 4-Step Process

### ğŸ“ **TEST CREATION** (Most Common)
```
1. ğŸ§­ ORIENT: Read .brain/skill-jacks/testing/creation/ai-verification-tdd-workflow.skill-jack.ts
   â””â”€â”€ Sets philosophy: Tests must provide AI confidence

2. ğŸ¯ DECIDE: Read .brain/skill-jacks/testing/patterns/test-strategy-selection.skill-jack.ts
   â””â”€â”€ Choose test type: E2E vs Integration vs Unit

3. ğŸ”§ SETUP: Read .brain/skill-jacks/testing/tooling/vitest-patterns.skill-jack.ts
   â””â”€â”€ Get tool foundation and configuration

4. ğŸ¨ IMPLEMENT: Read specific pattern skill-jack based on step 2 decision:
   â”œâ”€â”€ E2E Browser â†’ .brain/skill-jacks/testing/core-patterns/playwright-browser-e2e.skill-jack.ts
   â”‚                + .brain/skill-jacks/testing/core-patterns/playwright-pom-patterns.skill-jack.ts
   â”œâ”€â”€ E2E Backend â†’ .brain/skill-jacks/testing/core-patterns/backend-api-e2e.skill-jack.ts
   â”œâ”€â”€ E2E CLI â†’ .brain/skill-jacks/testing/core-patterns/cli-application-e2e.skill-jack.ts
   â”œâ”€â”€ Unit/Integration â†’ .brain/skill-jacks/testing/core-patterns/unit-test-first-principles.skill-jack.ts
   â”‚                    + .brain/skill-jacks/testing/core-patterns/vitest-test-object-model.skill-jack.ts
   â”œâ”€â”€ Component â†’ .brain/skill-jacks/testing/core-patterns/storybook-component-testing.skill-jack.ts
   â”œâ”€â”€ Async â†’ .brain/skill-jacks/testing/specific-techniques/async-testing-patterns.skill-jack.ts
   â”œâ”€â”€ Database â†’ .brain/skill-jacks/testing/specific-techniques/database-testing-patterns.skill-jack.ts
   â”œâ”€â”€ Performance â†’ .brain/skill-jacks/testing/specific-techniques/performance-testing-strategies.skill-jack.ts
   â”œâ”€â”€ Security â†’ .brain/skill-jacks/testing/specific-techniques/security-testing-patterns.skill-jack.ts
   â””â”€â”€ API Contracts â†’ .brain/skill-jacks/testing/specific-techniques/api-contract-testing.skill-jack.ts
```

### âš¡ **TEST EXECUTION**
```
1. ğŸ§­ ORIENT: Read .brain/skill-jacks/testing/execution/test-execution-strategies.skill-jack.ts
2. ğŸ¯ DECIDE: Scope (single test, suite, CI/CD)
3. ğŸ”§ SETUP: Environment and dependencies
4. ğŸš€ EXECUTE: Run with monitoring
```

### ğŸ” **TEST DEBUGGING**  
```
1. ğŸ§­ ORIENT: Read .brain/skill-jacks/testing/debugging/test-debugging-strategies.skill-jack.ts
2. ğŸ¯ DECIDE: Failure type (logic, environment, timing)
3. ğŸ”§ ISOLATE: Systematic debugging approach
4. ğŸ› ï¸ FIX: Apply solution and verify
```

### ğŸ“Š **TEST QUALITY ANALYSIS**
```
1. ğŸ§­ ORIENT: Read .brain/skill-jacks/testing/quality/test-quality-analysis.skill-jack.ts
2. ğŸ¯ ASSESS: AI verification confidence, maintainability
3. ğŸ”§ MEASURE: Coverage, performance, flakiness
4. ğŸ“ˆ IMPROVE: Specific recommendations
```

## ğŸ“ COMPLETE SKILL JACK MENU

### ğŸ¯ Core Patterns (Essential - use these most often)
```
.brain/skill-jacks/testing/core-patterns/unit-test-first-principles.skill-jack.ts
.brain/skill-jacks/testing/core-patterns/vitest-test-object-model.skill-jack.ts
.brain/skill-jacks/testing/core-patterns/vitest-strategic-mocking.skill-jack.ts
.brain/skill-jacks/testing/core-patterns/playwright-browser-e2e.skill-jack.ts
.brain/skill-jacks/testing/core-patterns/playwright-pom-patterns.skill-jack.ts
.brain/skill-jacks/testing/core-patterns/backend-api-e2e.skill-jack.ts
.brain/skill-jacks/testing/core-patterns/cli-application-e2e.skill-jack.ts
.brain/skill-jacks/testing/core-patterns/storybook-component-testing.skill-jack.ts
```

### ğŸ¯ Specific Techniques (Specialized scenarios)
```
.brain/skill-jacks/testing/specific-techniques/async-testing-patterns.skill-jack.ts
.brain/skill-jacks/testing/specific-techniques/database-testing-patterns.skill-jack.ts
.brain/skill-jacks/testing/specific-techniques/performance-testing-strategies.skill-jack.ts
.brain/skill-jacks/testing/specific-techniques/security-testing-patterns.skill-jack.ts
.brain/skill-jacks/testing/specific-techniques/api-contract-testing.skill-jack.ts
```

### ğŸ› ï¸ Support & Workflow
```
.brain/skill-jacks/testing/creation/ai-verification-tdd-workflow.skill-jack.ts
.brain/skill-jacks/testing/patterns/test-strategy-selection.skill-jack.ts
.brain/skill-jacks/testing/tooling/vitest-patterns.skill-jack.ts
.brain/skill-jacks/testing/debugging/test-debugging-strategies.skill-jack.ts
.brain/skill-jacks/testing/execution/test-execution-strategies.skill-jack.ts
.brain/skill-jacks/testing/quality/test-quality-analysis.skill-jack.ts
.brain/skill-jacks/testing/visual/visual-testing-patterns.skill-jack.ts
```

## âš ï¸ AGENT COMPLIANCE RULES

### NEVER:
- Skip the orientation step (step 1)
- Jump directly to implementation
- Ignore the decision framework
- Write tests without TOM/POM patterns
- Guess at file paths - use the exact paths listed above

### ALWAYS:
- Read skill-jacks in the specified order using full file paths
- Use the philosophy from ai-verification-tdd-workflow
- Choose test type using test-strategy-selection
- Implement using specific pattern skill-jacks with full paths

### FILE PATH REQUIREMENTS:
- Always use full paths starting with .brain/skill-jacks/testing/
- Read multiple files when specified (e.g., playwright-browser-e2e + playwright-pom-patterns)
- Reference this menu if unsure which skill jack to use

### VALIDATE:
- [ ] Followed 4-step process?
- [ ] Used correct file paths?
- [ ] Used appropriate skill-jacks?
- [ ] Test provides AI verification confidence?
- [ ] Used TOM/POM patterns?

## ğŸ¯ WHY THIS WORKS FOR AGENTS

1. **4 Steps Maximum** - Easy to remember and follow
2. **Full File Paths** - No guessing where files are located
3. **Complete Menu** - All available skill jacks listed with paths
4. **Same Pattern** - Consistent across all testing tasks
5. **Clear Branches** - "Choose your own adventure" at step 4 with exact paths
6. **Philosophy First** - Quality mindset from the start
7. **Short Rule** - High compliance probability

---

**Remember: This process takes 2 minutes but saves hours of debugging and rework.** 